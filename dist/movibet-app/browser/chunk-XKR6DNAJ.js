import{f as k,i as E,k as R,l as F,q as j,r as z,s as T,t as A,u as N}from"./chunk-HZQGZOES.js";import{L as U,M as G,O as V,P as $}from"./chunk-AZ3IK2YY.js";import{Db as v,Hb as b,Pb as t,Qb as s,Rb as p,Sa as _,Sb as h,T as x,Tb as O,Ua as o,Ub as S,Va as m,Wb as D,Xb as P,Yb as y,ga as M,j as f,kb as c,ob as g,tc as I,wb as e,wc as w,xb as i,yb as C}from"./chunk-HLNWZXDZ.js";function L(l,a){if(l&1&&(e(0,"div",16)(1,"span"),t(2,"Spoken Languages:"),i(),e(3,"strong"),t(4),i(),t(5," - "),i()),l&2){let r=a.$implicit;o(4),p(" ",r.name,"")}}function W(l,a){if(l&1&&(e(0,"span"),t(1),i()),l&2){let r=a.$implicit;o(),s(r)}}var B=class l{constructor(a,r,n){this.dialogRef=a;this.movie=r;this.movieService=n}guestSessionId=null;ratingNumbers=[0,1,2,3,4,5,6,7,8,9,10];rating=0;destroy$=new f;ngOnInit(){this.initGuestSession()}getImageUrl(a){return this.movieService.getImageUrl(a)}onPrimaryClick(){this.dialogRef.close()}initGuestSession(){this.movieService.generateGuestSession().subscribe(a=>{this.guestSessionId=a.guest_session_id})}postRating(){this.guestSessionId&&this.rating>0&&this.movie.id?this.movieService.rateMovie(this.movie.id,this.rating,this.guestSessionId).pipe(x(this.destroy$)).subscribe(a=>{alert("Rating submitted successfully!")}):alert("Movie ID or guest session is missing")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(r){return new(r||l)(m(U),m(G),m(N))};static \u0275cmp=M({type:l,selectors:[["app-movie-details-dialog"]],standalone:!0,features:[D],decls:48,vars:15,consts:[["matIconPrefix","","mat-icon-button","","aria-label","Clear",1,"btn-close",3,"click"],["mat-dialog-content","",1,"movie-details-container"],[1,"movie-header"],[1,"movie-poster",3,"src","alt"],[1,"movie-info"],[1,"movie-overview"],[1,"movie-meta"],[1,"movie-ratings"],["class","spoken-languages",4,"ngFor","ngForOf"],[1,"rating-container"],["for","rating"],[1,"rating-preview"],["type","range","id","rating","name","rating","min","0","max","10","step","1",3,"ngModelChange","ngModel"],[1,"slider-labels"],[4,"ngFor","ngForOf"],[3,"click"],[1,"spoken-languages"]],template:function(r,n){r&1&&(e(0,"button",0),v("click",function(){return n.onPrimaryClick()}),e(1,"mat-icon"),t(2,"close"),i()(),e(3,"div",1)(4,"div",2),C(5,"img",3),e(6,"h2"),t(7),i()(),e(8,"div",4)(9,"p",5),t(10),i(),e(11,"div",6)(12,"div"),t(13," Budget: "),e(14,"strong"),t(15),i()(),e(16,"div"),t(17," Revenue: "),e(18,"strong"),t(19),i()(),e(20,"div"),t(21," Release Date: "),e(22,"strong"),t(23),i()()(),e(24,"div",7)(25,"div"),t(26," Vote Average: "),e(27,"strong"),t(28),P(29,"keepOneDigit"),i()(),e(30,"div"),t(31," Vote Count: "),e(32,"strong"),t(33),i()()(),c(34,L,6,1,"div",8),i(),e(35,"div",9)(36,"label",10),t(37,"Rate this movie:"),i(),e(38,"div",11),t(39,"Your Rating: "),e(40,"strong"),t(41),i(),t(42,"/10"),i(),e(43,"input",12),S("ngModelChange",function(d){return O(n.rating,d)||(n.rating=d),d}),i(),e(44,"div",13),c(45,W,2,1,"span",14),i(),e(46,"button",15),v("click",function(){return n.postRating()}),t(47,"Submit Rating"),i()()()),r&2&&(o(5),b("alt",n.movie.title),g("src",n.getImageUrl(n.movie.poster_path),_),o(2),s(n.movie.title),o(3),s(n.movie.overview),o(5),s(n.movie.budget),o(4),s(n.movie.revenue),o(4),p(" ",n.movie.release_date,""),o(5),p("",y(29,13,n.movie.vote_average)," / 10"),o(5),s(n.movie.vote_count),o(),g("ngForOf",n.movie.spoken_languages),o(7),s(n.rating),o(2),h("ngModel",n.rating),o(2),g("ngForOf",n.ratingNumbers))},dependencies:[j,k,F,E,R,w,I,T,z,$,V,A],styles:[".btn-close[_ngcontent-%COMP%]{display:inline-block;position:absolute;right:28px;top:20px;border-radius:50%;border:white 1px solid;cursor:pointer;outline:none}.btn-close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;font-weight:bolder;color:gray}.movie-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px;max-width:600px;background:linear-gradient(to top,#202735,#323c46,#008f93)}.movie-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.movie-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:20px;font-size:1.8rem}.movie-poster[_ngcontent-%COMP%]{width:120px;height:180px;object-fit:cover;border-radius:8px;box-shadow:0 4px 10px #0003}.movie-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.movie-overview[_ngcontent-%COMP%]{margin:10px 0;font-size:1rem;color:#fff;line-height:1.5}.movie-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;font-size:1rem}.movie-ratings[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.spoken-languages[_ngcontent-%COMP%]{margin-top:20px;font-size:1rem}.spoken-languages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{color:#fff}@media (max-width: 820px){.movie-details-container[_ngcontent-%COMP%]{padding:15px;max-width:100%}.movie-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.movie-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:0;margin-top:10px;font-size:1.6rem}.movie-poster[_ngcontent-%COMP%]{width:100px;height:150px}}.rating-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;align-items:center}.rating-preview[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff;margin-bottom:10px}.rating-container[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:94%;margin-bottom:10px;appearance:none;height:8px;background-color:#ddd;border-radius:5px;outline:none}.slider-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;color:#fff;font-size:1rem}.slider-labels[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:center}.rating-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#0a74da;color:#fff;border:none;padding:10px 15px;cursor:pointer;border-radius:5px}.rating-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#055ba3}"]})};export{B as MovieDetailsDialogComponent};
